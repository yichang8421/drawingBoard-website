{"version":3,"sources":["main.ts"],"names":[],"mappings":"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","file":"main.b8adaea3.js","sourceRoot":"..\\src","sourcesContent":["//1. 初始化数据\r\nlet canvas = <HTMLCanvasElement>document.getElementById(\"canvas\"),\r\n    ctx: CanvasRenderingContext2D = canvas.getContext(\"2d\"),\r\n    eraserEnabled = false,\r\n    pen = document.getElementById(\"pen\"),\r\n    eraser = document.getElementById(\"eraser\"),\r\n    color = document.getElementById(\"color\"),\r\n    thickness = document.getElementById(\"thickness\"),\r\n    actions = document.getElementById(\"actions\");\r\n\r\n//2. 设置画布自动布满视口\r\nautoSetCanvasSize(canvas);\r\n\r\n//3. 执行用户动作\r\npainting(canvas);\r\n\r\ncolor.addEventListener(\"click\", changeColor);\r\nthickness.addEventListener(\"click\", changeThickness);\r\nactions.addEventListener(\"click\", (e?: MouseEvent) => {\r\n    if (e.target.tagName === \"svg\") {\r\n        takeAction(e.target.id);\r\n    } else {\r\n        if (e.target.tagName === \"use\") {\r\n            takeAction(e.target.parentElement.id);\r\n        } else {\r\n            if (e.target.tagName === \"LI\") {\r\n                takeAction(e.target.children[0].id);\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\n/****************************/\r\n\r\n/* 绘制操作 */\r\nfunction painting(canvas: HTMLCanvasElement) {\r\n    ctx.strokeStyle = \"black\";\r\n    ctx.fillStyle = \"black\";\r\n    ctx.lineWidth = 2;\r\n    ctx.radius = 1;\r\n    let isUsing = false;        //是否正在使用\r\n    let previousPoint: PreviousPoint = {};\r\n    //特性检测\r\n    if (document.body.ontouchstart !== undefined) {\r\n        //移动端\r\n        canvas.addEventListener(\"touchstart\", touchStart.bind(null, previousPoint));\r\n        canvas.addEventListener(\"touchmove\", touchMove.bind(null, previousPoint));\r\n        canvas.addEventListener(\"touchcancel\", touchCancel);\r\n    } else {\r\n        //PC端\r\n        canvas.onmousedown = (e?: MouseEvent) => {\r\n            isUsing = true;\r\n            let x = e.clientX;\r\n            let y = e.clientY;\r\n            if (!eraserEnabled) {\r\n                previousPoint = {x: x, y: y};\r\n                drawPoint(x, y, ctx.radius);\r\n            } else {\r\n                ctx.clearRect(x - 5, y - 5, 10, 10);\r\n            }\r\n        };\r\n        canvas.onmousemove = (e?: MouseEvent) => {\r\n            if (isUsing) {\r\n                let x = e.clientX;\r\n                let y = e.clientY;\r\n                let newPoint = {x: x, y: y};\r\n                if (!eraserEnabled) {\r\n                    drawPoint(x, y, ctx.radius);\r\n                    drawLine(previousPoint.x, previousPoint.y, newPoint.x, newPoint.y);\r\n                    previousPoint = newPoint;\r\n                } else {\r\n                    ctx.clearRect(x - 5, y - 5, 10, 10);\r\n                }\r\n            }\r\n        };\r\n        canvas.onmouseup = () => {\r\n            isUsing = false;\r\n        };\r\n    }\r\n}\r\n\r\nfunction touchStart(point: {}, e: TouchEvent) {\r\n    e.preventDefault();\r\n    let x: number, y: number;\r\n    for (let touch of (e.changedTouches as unknown as Touch[])) {\r\n        x = Math.floor(touch.clientX);\r\n        y = Math.floor(touch.clientY);\r\n        if (!eraserEnabled) {\r\n            point[touch.identifier] = {x: x, y: y};\r\n            drawPoint(x, y, ctx.radius);\r\n        } else {\r\n            ctx.clearRect(x - 5, y - 5, 10, 10);\r\n        }\r\n    }\r\n}\r\n\r\nfunction touchMove(originalPoint: number, e: TouchEvent): void {\r\n    e.preventDefault();\r\n    let x: number, y: number, newPoint = {};\r\n    for (let touch of (e.changedTouches as unknown as Touch[])) {\r\n        x = Math.floor(touch.clientX);\r\n        y = Math.floor(touch.clientY);\r\n        if (!eraserEnabled) {\r\n            newPoint[touch.identifier] = {x: x, y: y};\r\n            drawPoint(x, y, ctx.radius);           // 避免在lineWidth变大时不完整\r\n            drawLine(originalPoint[touch.identifier].x, originalPoint[touch.identifier].y, newPoint[touch.identifier].x, newPoint[touch.identifier].y);\r\n            originalPoint[touch.identifier] = newPoint[touch.identifier];\r\n        } else {\r\n            ctx.clearRect(x - 8, y - 8, 16, 16);\r\n        }\r\n    }\r\n}\r\n\r\nfunction touchCancel(): void {\r\n    alert(\"超过最大可触屏限制：最多允许五指触屏\");\r\n}\r\n\r\n/* 选笔触颜色 */\r\nfunction changeColor(e?: MouseEvent): void {\r\n    let selectedColor = e.target.id;\r\n    ctx.strokeStyle = selectedColor;\r\n    ctx.fillStyle = selectedColor;\r\n    whichActived(selectedColor, \"color\");\r\n}\r\n\r\n/* 选笔触粗细 */\r\nfunction changeThickness(e?: MouseEvent): void {\r\n    let selectedThickness = e.target.id;\r\n    if (selectedThickness === \"thin\") {\r\n        ctx.lineWidth = 2;\r\n        ctx.radius = 1;\r\n    } else if (selectedThickness === \"middle\") {\r\n        ctx.lineWidth = 6;\r\n        ctx.radius = 3;\r\n    } else if (selectedThickness === \"thick\") {\r\n        ctx.lineWidth = 10;\r\n        ctx.radius = 5;\r\n    }\r\n    whichActived(selectedThickness, \"thickness\");\r\n}\r\n\r\nfunction whichActived(target: string, parentID: string): void {\r\n    let parentNode: HTMLElement;\r\n    if (parentID === \"color\") {\r\n        parentNode = color;\r\n    } else if (parentID === \"thickness\") {\r\n        parentNode = thickness;\r\n    }\r\n    for (let i = 0; i < parentNode.children.length; i++) {\r\n        if (target === parentNode.children[i].id) {\r\n            parentNode.children[i].className = \"active\";\r\n        } else if (target !== parentID) {\r\n            parentNode.children[i].className = \"\";\r\n        }\r\n    }\r\n}\r\n\r\n/* 画圆点 */\r\nfunction drawPoint(x: number, y: number, radius: number): void {\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n    ctx.fill();\r\n}\r\n\r\n/* 画轨迹（线条） */\r\nfunction drawLine(x1: number, y1: number, x2: number, y2: number): void {\r\n    // 解决IOS中获取不到ctx设置的问题\r\n    if (ctx.lineWidth === 1) {\r\n        ctx.lineWidth = 2;\r\n        ctx.radius = 1;\r\n    }\r\n    ctx.beginPath();\r\n    ctx.moveTo(x1, y1);\r\n    ctx.lineTo(x2, y2);\r\n    ctx.stroke();\r\n}\r\n\r\n/* 选择哪个动作 */\r\nfunction takeAction(element: string): void {\r\n    if (element === \"pen\") {\r\n        eraserEnabled = false;\r\n        pen.classList.add(\"active\");\r\n        eraser.classList.remove(\"active\");\r\n        color.className = \"active\";\r\n        thickness.className = \"active\";\r\n    } else if (element === \"eraser\") {\r\n        eraserEnabled = true;\r\n        pen.classList.remove(\"active\");\r\n        eraser.classList.add(\"active\");\r\n        color.className = \"remove\";\r\n        thickness.className = \"remove\";\r\n    } else if (element === \"clearall\") {\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        //清屏\r\n        eraserEnabled = false;\r\n        pen.classList.add(\"active\");\r\n        eraser.classList.remove(\"active\");\r\n        color.className = \"active\";\r\n        thickness.className = \"active\";\r\n    } else if (element === \"save\") {\r\n        let a = document.createElement(\"a\");\r\n        a.href = canvas.toDataURL();           //获得图片地址\r\n        a.target = \"_blank\";\r\n        a.download = \"image.png\";\r\n        a.click();\r\n    }\r\n}\r\n\r\n/* 自动调整画布宽高 */\r\nfunction autoSetCanvasSize(canvas: HTMLCanvasElement): void {\r\n    setCanvasSize(canvas);\r\n    window.onresize = () => {\r\n        setCanvasSize(canvas);\r\n    };\r\n\r\n    //设置画布宽高\r\n    function setCanvasSize(canvas: HTMLCanvasElement): void {\r\n        let pageWidth = document.documentElement.clientWidth;\r\n        let pageHeight = document.documentElement.clientHeight;\r\n        canvas.width = pageWidth;\r\n        canvas.height = pageHeight;\r\n    }\r\n}"]}